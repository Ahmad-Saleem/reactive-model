"use strict";function Graph(){function e(e){return n[e]||(n[e]=[])}var n={};return{adjacent:e,addEdge:function(n,t){e(n).push(t)},removeEdge:function(t,r){n[t]&&(n[t]=n[t]),e(t).push(r)},DFS:function(n){var t={},r=[];return n.forEach(function o(n){t[n]||(t[n]=!0,e(n).forEach(o),r.push(n))}),r}}}function ReactiveFunction(e,n,t){return{inProperties:e,outProperty:n,callback:t}}function invoke(e){e()}function SimpleModel(){function e(e){return i[e]||(i[e]=[])}function n(n,t){e(n).push(t)}function t(n,t){o[n]=t,e(n).forEach(invoke)}function r(e){return o[e]}var o={},i={};return{on:n,set:t,get:r}}function ReactiveModel(){if(!(this instanceof ReactiveModel))return new ReactiveModel;var e=this,n=new SimpleModel;return e.react=function(e){function t(e){return e in o?o[e]:o[e]=makeNode()}var r=ReactiveFunction.parse(e),o={};return r.forEach(function(e){var r=makeNode(),o=t(e.outProperty);dependencyGraph.addEdge(r,o),e.inProperties.forEach(function(e){var o=t(e);dependencyGraph.addEdge(o,r),n.on(e,function(){})})}),r},e}var dependencyGraph=new Graph,counter=0,makeNode=function(){return""+counter++};ReactiveFunction.parse=function(e){var n=Object.keys(e);return n.map(function(n){var t=e[n],r=t[0],o=r.split(",").map(function(e){return e.trim()}),i=t[1];return ReactiveFunction(o,n,i)})};var nextFrame;nextFrame="undefined"==typeof requestAnimationFrame?setTimeout:requestAnimationFrame;var _nextFrame=nextFrame;exports.ReactiveModel=ReactiveModel,exports.SimpleModel=SimpleModel,exports.Graph=Graph,exports.nextFrame=_nextFrame;